/* global console */
window.log=function(){var e;e.history=e.history||[],e.history.push(arguments),this.console&&console.log(Array.prototype.slice.call(arguments))};var Rookie=window.Rookie||{},RM_Settings=window.RM_Settings||{};Rookie={init:function(){var e,t,n;if(Rookie.setEnvironment(),
Rookie.limitComment.init(),0<$(".comment-tab").length&&$(".comment-tab").bind("click",function(e){var t=$(this).attr("data-filter"),n=$(this).attr("data-field");e.preventDefault(),$(".comment-tab").removeClass("selected"),$(this).addClass("selected"),$(".form").hide(),$(t).show(),Rookie.limitComment.init(n)}),$("input").bind("blur",function(){var e=$(this),t=e.parent();""===e.val()&&t.find("span").show()}),0<$(".social-media a.share").length&&$(".social-media a.share").bind("click",function(e){var t=$(this).attr("href"),n=$(this).attr("data-width"),i=$(this).attr("data-height");e.preventDefault(),window.open(t,"sharing","width="+n+",height="+i)}),$("#username").bind("blur",function(){var e=$(this).val().toLowerCase(),t=$("#lastname").val().toLowerCase(),n,i;0<t.length&&(i=(n=new RegExp(t,"g")).test(e)),!0===i?($("#submit_comment").addClass("disabled").attr({disabled:!0}),$("#house-rules span").css({"text-decoration":"underline"})):($("#submit_comment").removeClass("disabled").attr({disabled:!1}),$("#house-rules span").css({"text-decoration":"none"}))}),0<$("#mobilemenu-toggle").length){var i=$("#outer-wrapper"),a=$("#inner-wrapper"),l="menu-open",o;$("#mobilemenu-toggle").on("click",function(e){e.preventDefault(),i.toggleClass(l)}),$('<div id="pagemask"></div>').appendTo(a).on("click",function(){
i.toggleClass(l)})}
var s=$("#mainmenu-categories-link");if(0<s.length){var r=$("#mainmenu-categories-submenu");r.addClass("js-hidden").removeClass("displaynone"),s.on("click",function(e){e.preventDefault(),r.toggleClass("js-hidden")})}var c=$("#mainmenu-search-toggle"),d;if(0<c.length){var m=$("#mainmenu-actions"),u=$("#mainmenu-search-form"),g=u.find(".cancel"),f=$("#mainmenu-search-input");u.toggleClass("displaynone"),
c.on("click",function(e){e.preventDefault(),m.addClass("search-is-open"),f.focus()}),g.on("click",function(e){e.preventDefault(),m.removeClass("search-is-open")})}
if(0<$("#article-format-gallery").length){var h=$("#gallery-container");if(void 0!==$.fn.flickity){h.flickity({cellAlign:"left",cellSelector:".gallery-item",freeScroll:!1,contain:!0,imagesLoaded:!0,selectedAttraction:"0.2",friction:"0.8",prevNextButtons:!1,resize:!0,setGallerySize:!1,wrapAround:!0,pageDots:!1,draggable:!1}).focus();var v=h.data("flickity"),p,y=$("#article-gallery-nav").addClass("article-gallery-nav").html('<button class="button article-gallery-previous">&larr; Back</button><span class="gallery-status"><span class="current-cell">1</span>/<span class="total-cells">'+v.cells.length+'</span></span><button class="button article-gallery-next">Next &rarr;</button>').removeClass("displaynone").insertBefore(h).find(".current-cell");h.on("cellSelect",function(){y.text(v.selectedIndex+1)}),
$(".article-gallery-previous").on("click",function(){h.flickity("previous"),w()}),
$(".article-gallery-next").on("click",function(){h.flickity("next"),w()}),v.once("settle",function(){w()});
var w=function(){var e=v.selectedElement.offsetHeight;h.animate({height:e},120)};void 0!==$.fn.debounce?$(window).resize(function(){$.debounce(120,w)}):$(window).resize(function(){w()})
}
}
var b=void(void 0!==$.fn.lazyload&&($("img.lazy").lazyload({threshold:200,event:"laterload"}),$(window).bind("load",function(){var e=setTimeout(function(){$("img.lazy").trigger("laterload")},1200)}))),k=function(){
var e=$("body");if(void 0!==e){var t=e.data("page-background");void 0!==t&&e.css("background-image","url("+t+")")}}(),C=$("#homepage-carousel-recently"),x;
if(0<C.length&&(
C.flickity({cellAlign:"left",cellSelector:".gallery-cell",
imagesLoaded:!0,setGallerySize:!0,selectedAttraction:"0.2",contain:!0,friction:"0.8",prevNextButtons:!0,pageDots:!1,draggable:!0}),C.flickity("resize")),0<$("#comments").length){var R=$("#comments-list");if(0<R.length){
var S=$("#page-comments-toggle").addClass("more-link"),z=S.find(".action-name");0<S.length&&(
z.text("Show"),R.addClass("js-hidden"),S.on("click",function(e){
e.preventDefault(),R.toggleClass("js-hidden"),z.text(function(e,t){return"Show"===t?"Hide":"Show"})}))}}
var B=$("#article-format-single");if(0<B.length){var D=$(".wp-caption").first(),E=$("#sidebar"),_=$("#article-feature-image");if(0===_.length){_=$('<div id="article-feature-image"></div>');var N=B.find(".article-title").first();_.insertBefore(N)}window.matchMedia("(min-width: 601px)").matches&&(B.addClass("js-article-feature-image"),D.detach(),_.html(D),
E.insertAfter($(".article-meta")))}
void 0!==$.fn.fitVids&&$(".post").fitVids();
},setEnvironment:function(){
var e="rookie",t;document.getElementsByTagName("body")[0].className+=e},limitComment:{countdown_span:".limit",limit:1600,init:function(e){var t=this,n=document.getElementById(e)||document.getElementById("login_comment")||document.getElementById("comment"),i=$(n).parent().find(t.countdown_span);
isNaN(parseInt($(i).text(),10))&&$(t.countdown_span).html(t.limit),$(n).keydown(function(){t.checkFieldLimit(this,t.countdown_span,t.limit)})},checkFieldLimit:function(e,t,n){e.value.length>n&&(e.value=e.value.substring(0,n)),$(e).parent().find(t).html(n-e.value.length)}},hasClass:function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}},$(document).ready(function(){Rookie.init();
});
